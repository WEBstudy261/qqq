<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜1 ãƒ‡ãƒ¼ã‚¿åˆ†æã‚¯ã‚¤ã‚º</title>
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
    <style>
        body { font-family: sans-serif; text-align: center; background-color: #f4f7f6; padding: 20px; }
        .card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 500px; margin: auto; }
        .data-box { background: #eef; padding: 15px; border-radius: 5px; font-weight: bold; margin: 10px 0; min-height: 50px; }
        input { width: 80px; padding: 5px; margin: 5px; }
        button { padding: 10px 20px; cursor: pointer; background: #28a745; color: white; border: none; border-radius: 5px; margin-top: 10px; }
        #result { margin-top: 20px; white-space: pre-wrap; text-align: left; display: inline-block; }
    </style>
</head>
<body>

<div class="card">
    <h2>ğŸ“Š ãƒ‡ãƒ¼ã‚¿åˆ†æã‚¯ã‚¤ã‚º</h2>
    <p>1ã€œ99ã®æ•°å€¤ã‚’ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆã—ã¾ã™ã€‚</p>
    
    <div id="data-display" class="data-box">ã€Œå•é¡Œä½œæˆã€ã‚’æŠ¼ã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆï¼</div>
    
    <div>å¹³å‡(å°æ•°ç¬¬1ä½): <input type="number" id="in_mean" step="0.1"></div>
    <div>ç¬¬1å››åˆ†ä½æ•°(Q1): <input type="number" id="in_q1" step="0.5"></div>
    <div>ä¸­å¤®å€¤(Q2): <input type="number" id="in_q2" step="0.5"></div>
    <div>ç¬¬3å››åˆ†ä½æ•°(Q3): <input type="number" id="in_q3" step="0.5"></div>

    <button py-click="generate_data">1. æ–°ã—ã„å•é¡Œã‚’ä½œæˆ</button><br>
    <button py-click="check_answer" style="background:#007bff">2. ç­”ãˆåˆã‚ã›</button>

    <div id="result"></div>
</div>

<script type="py">
import random
import statistics
from pyscript import document

# ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã§æ­£è§£ã‚’ä¿æŒ
ans = {}

def generate_data(event):
    n = random.randint(10, 15)
    data = sorted([random.randint(1, 99) for _ in range(n)])
    
    # è¨ˆç®— (é«˜æ ¡æ•°å­¦æµ)
    mean_val = round(statistics.mean(data), 1)
    q2 = statistics.median(data)
    mid = n // 2
    low_half = data[:mid]
    high_half = data[mid + (n % 2):]
    q1 = statistics.median(low_half)
    q3 = statistics.median(high_half)
    
    global ans
    ans = {"mean": mean_val, "q1": q1, "q2": q2, "q3": q3}
    
    document.getElementById("data-display").innerText = f"ãƒ‡ãƒ¼ã‚¿: {data}\n(n={n})"
    document.getElementById("result").innerText = ""

def check_answer(event):
    if not ans: return
    
    keys = ["mean", "q1", "q2", "q3"]
    labels = ["å¹³å‡", "Q1", "Q2", "Q3"]
    output = []
    
    for k, lab in zip(keys, labels):
        val_str = document.getElementById(f"in_{k}").value
        if not val_str:
            output.append(f"âš ï¸ {lab}ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„")
            continue
            
        val = float(val_str)
        if val == ans[k]:
            output.append(f"âœ… {lab}: æ­£è§£ï¼")
        else:
            output.append(f"âŒ {lab}: ä¸æ­£è§£ (æ­£è§£: {ans[k]})")
            
    document.getElementById("result").innerText = "\n".join(output)
</script>

</body>
</html>
